<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Stable Fingerprint</title>
</head>
<body>
  <div>
    <h2>Device Fingerprint</h2>
    <p id="fingerprint">Generating...</p>
  </div>
  <script>
    async function generateStableFingerprint() {
      const fingerprintData = [
        navigator.userAgent,
        navigator.language,
        navigator.platform,
        navigator.hardwareConcurrency,
        navigator.deviceMemory,
        screen.width,
        screen.height,
        screen.colorDepth,
        new Date().getTimezoneOffset()
      ].join('||');

      const encoder = new TextEncoder();
      const data = encoder.encode(fingerprintData);
      const hashBuffer = await crypto.subtle.digest('SHA-256', data);
      const hashArray = Array.from(new Uint8Array(hashBuffer));
      const hashHex = hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
      return hashHex;
    }

    generateStableFingerprint().then(fp => {
      document.getElementById('fingerprint').textContent = fp;
      // Optionally store in localStorage
      localStorage.setItem('deviceFingerprint', fp);
    });
  </script>
</body>
</html>
